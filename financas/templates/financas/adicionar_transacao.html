{% extends "base.html" %}
{% block title %}Novo Lançamento - Ordo{% endblock %}
{% block content %}

<!-- Header -->
<div class="flex flex-col sm:flex-row justify-between items-start sm:items-center mb-8 animate-fade-in">
    <div class="mb-4 sm:mb-0">
        <h1 class="text-3xl sm:text-4xl font-bold text-dark-800 mb-2">Novo Lançamento</h1>
        <p class="text-dark-500 text-lg">Adicione uma nova transação ao seu controle financeiro</p>
    </div>
    
    <a href="{% url 'lista_transacoes' %}"
        class="flex items-center space-x-2 bg-dark-100 hover:bg-dark-200 text-dark-700 font-medium px-4 py-3 rounded-xl transition-colors">
        <i data-lucide="arrow-left" class="w-4 h-4"></i>
        <span>Voltar</span>
    </a>
</div>

<!-- Form Container -->
<div class="max-w-xl mx-auto">
    <div class="bg-white rounded-2xl shadow-lg border border-gray-100 overflow-hidden animate-slide-up">
        
        <!-- Form Header -->
        <div class="bg-gradient-to-r from-primary-500 to-primary-600 px-6 py-4">
            <div class="flex items-center space-x-3">
                <div class="w-10 h-10 bg-white/20 rounded-xl flex items-center justify-center">
                    <i data-lucide="plus-circle" class="w-5 h-5 text-white"></i>
                </div>
                <div>
                    <h2 class="text-lg font-bold text-white">Dados da Transação</h2>
                    <p class="text-sm text-primary-100">Preencha as informações abaixo</p>
                </div>
            </div>
        </div>
        
        <!-- Form Content -->
        <div class="p-6">
            <form method="post">
                {% csrf_token %}
                
                <div class="space-y-5">
                    
                    <!-- Tipo e Data -->
                    <div class="grid grid-cols-2 gap-4">
                        <div class="form-group">
                            <label for="{{ form.tipo.id_for_label }}" class="flex items-center space-x-2 text-dark-700 font-medium mb-2">
                                <i data-lucide="tag" class="w-4 h-4"></i>
                                <span>Tipo</span>
                            </label>
                            {{ form.tipo }}
                            {% if form.tipo.errors %}
                            <p class="text-red-600 text-sm mt-1 flex items-center space-x-1">
                                <i data-lucide="alert-circle" class="w-3 h-3"></i>
                                <span>{{ form.tipo.errors.as_text }}</span>
                            </p>
                            {% endif %}
                        </div>
                        
                        <div class="form-group">
                            <label for="{{ form.data.id_for_label }}" class="flex items-center space-x-2 text-dark-700 font-medium mb-2">
                                <i data-lucide="calendar" class="w-4 h-4"></i>
                                <span>Data</span>
                            </label>
                            {{ form.data }}
                            {% if form.data.errors %}
                            <p class="text-red-600 text-sm mt-1 flex items-center space-x-1">
                                <i data-lucide="alert-circle" class="w-3 h-3"></i>
                                <span>{{ form.data.errors.as_text }}</span>
                            </p>
                            {% endif %}
                        </div>
                    </div>
                    
                    <!-- Descrição -->
                    <div class="form-group">
                        <label for="{{ form.descricao.id_for_label }}" class="flex items-center space-x-2 text-dark-700 font-medium mb-2">
                            <i data-lucide="file-text" class="w-4 h-4"></i>
                            <span>Descrição</span>
                        </label>
                        {{ form.descricao }}
                        {% if form.descricao.errors %}
                        <p class="text-red-600 text-sm mt-1 flex items-center space-x-1">
                            <i data-lucide="alert-circle" class="w-3 h-3"></i>
                            <span>{{ form.descricao.errors.as_text }}</span>
                        </p>
                        {% endif %}
                    </div>
                    
                    <!-- Valor e Categoria -->
                    <div class="grid grid-cols-2 gap-4">
                        <div class="form-group">
                            <label for="{{ form.valor.id_for_label }}" class="flex items-center space-x-2 text-dark-700 font-medium mb-2">
                                <i data-lucide="dollar-sign" class="w-4 h-4"></i>
                                <span>Valor</span>
                            </label>
                            <div class="relative">
                                <span class="absolute left-3 top-1/2 transform -translate-y-1/2 text-dark-500 text-sm">R$</span>
                                {{ form.valor }}
                            </div>
                            {% if form.valor.errors %}
                            <p class="text-red-600 text-sm mt-1 flex items-center space-x-1">
                                <i data-lucide="alert-circle" class="w-3 h-3"></i>
                                <span>{{ form.valor.errors.as_text }}</span>
                            </p>
                            {% endif %}
                        </div>
                        
                        <div class="form-group">
                            <label for="{{ form.categoria.id_for_label }}" class="flex items-center space-x-2 text-dark-700 font-medium mb-2">
                                <i data-lucide="folder" class="w-4 h-4"></i>
                                <span>Categoria</span>
                            </label>
                            {{ form.categoria }}
                            {% if form.categoria.errors %}
                            <p class="text-red-600 text-sm mt-1 flex items-center space-x-1">
                                <i data-lucide="alert-circle" class="w-3 h-3"></i>
                                <span>{{ form.categoria.errors.as_text }}</span>
                            </p>
                            {% endif %}
                        </div>
                    </div>
                    
                    <!-- Cartão de Crédito -->
                    <div class="form-group">
                        <label for="{{ form.cartao_credito.id_for_label }}" class="flex items-center space-x-2 text-dark-700 font-medium mb-2">
                            <i data-lucide="credit-card" class="w-4 h-4"></i>
                            <span>Cartão de Crédito</span>
                            <span class="text-xs bg-dark-100 text-dark-600 px-2 py-1 rounded-full">Opcional</span>
                        </label>
                        {{ form.cartao_credito }}
                        {% if form.cartao_credito.errors %}
                        <p class="text-red-600 text-sm mt-1 flex items-center space-x-1">
                            <i data-lucide="alert-circle" class="w-3 h-3"></i>
                            <span>{{ form.cartao_credito.errors.as_text }}</span>
                        </p>
                        {% endif %}
                    </div>
                </div>
                
                <!-- Form Actions -->
                <div class="flex items-center justify-between mt-6 pt-5 border-t border-gray-200">
                    <a href="{% url 'lista_transacoes' %}" 
                       class="flex items-center space-x-2 text-dark-500 hover:text-dark-700 font-medium transition-colors">
                        <i data-lucide="x" class="w-4 h-4"></i>
                        <span>Cancelar</span>
                    </a>
                    
                    <button type="submit" 
                            class="flex items-center space-x-2 bg-primary-500 hover:bg-primary-600 text-white font-semibold py-3 px-6 rounded-xl transition-all duration-300 shadow-lg hover:shadow-xl">
                        <i data-lucide="check" class="w-4 h-4"></i>
                        <span>Salvar Lançamento</span>
                    </button>
                </div>
            </form>
        </div>
    </div>
    
    <!-- Quick Tips -->
    <div class="mt-6 bg-blue-50 rounded-xl p-4 animate-fade-in" style="animation-delay: 0.2s;">
        <div class="flex items-start space-x-3">
            <div class="w-6 h-6 bg-blue-100 rounded-lg flex items-center justify-center flex-shrink-0 mt-0.5">
                <i data-lucide="lightbulb" class="w-3 h-3 text-blue-600"></i>
            </div>
            <div>
                <h3 class="font-medium text-blue-900 mb-1">Dicas rápidas</h3>
                <p class="text-xs text-blue-700">Use descrições claras e categorize suas transações para relatórios mais precisos.</p>
            </div>
        </div>
    </div>
</div>

<style>
/* Custom Form Styling */
.form-group input,
.form-group select,
.form-group textarea {
    width: 100%;
    padding: 10px 12px;
    border: 2px solid #e2e8f0;
    border-radius: 10px;
    font-size: 15px;
    transition: all 0.3s ease;
    background-color: #f8fafc;
}

.form-group input:focus,
.form-group select:focus,
.form-group textarea:focus {
    outline: none;
    border-color: #84cc16;
    background-color: #ffffff;
    box-shadow: 0 0 0 3px rgba(132, 204, 22, 0.1);
}

.form-group input[type="number"] {
    padding-left: 35px;
}

.form-group select {
    background-image: url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' fill='none' viewBox='0 0 20 20'%3e%3cpath stroke='%236b7280' stroke-linecap='round' stroke-linejoin='round' stroke-width='1.5' d='m6 8 4 4 4-4'/%3e%3c/svg%3e");
    background-position: right 10px center;
    background-repeat: no-repeat;
    background-size: 16px;
    padding-right: 35px;
    appearance: none;
}
</style>

<script>
document.addEventListener('DOMContentLoaded', function() {
    // Initialize Lucide icons
    lucide.createIcons();
    
    // Auto-format currency input
    const valorInput = document.querySelector('input[name="valor"]');
    if (valorInput) {
        valorInput.addEventListener('input', function(e) {
            let value = e.target.value.replace(/\D/g, '');
            value = (value / 100).toFixed(2);
            e.target.value = value;
        });
    }
});
</script>

{% endblock %}